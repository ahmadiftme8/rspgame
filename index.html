<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSP Game</title>
    <link rel="stylesheet" href="RSP-02.css">
</head>
<body>
    <header class="the-header">
    <h1 class="the-title">Rock scissors Paper</h1>
    <p class="subtitle">Created By Fatemeh Ahmadi in 2024</p>
    </header>
<!--     <header class="hero">
        <video autoplay loop muted plays-inlie class="vidbg">
            <source src="images/video01.mp4" >
        </video>
        <div class="overlay"></div>
    </header> -->

    <audio id="clickSound" preload="auto">
        <source src="sounds/pick.mp3" type="audio/mp3">
        <!-- Add additional source elements for different audio formats if needed -->
      </audio>
      

<main>

    <p class="js-result"></p>
    <p class="js-moves">
       <!--  you 
        <img src="images/rock-emoji.png" >
        <img src="images/paper-emoji.png">
        Robot -->

    </p>

    <div class="RPS-box">
        <button onclick="
            playGame('rock');
            playClickSound();
            "class="rck-btn">
                <img src="images/rock-emoji.png" alt="fist">
            </button>


        <button onclick="
            playGame('paper') ; 
        "class="ppr-btn">
            <img src="images/paper-emoji.png" alt="fist">
        </button>


        <button onclick="
            playGame('scissors');
        " class="ssr-btn">
            <img src="images/scissors-emoji.png" alt="fist">
        </button>
    </div>

        
    <p class="js-scores"></p>



    <button onclick="
        
        resultRemover();

        
        score.wins= 0;
        score.losses = 0;
        score.ties = 0; 

        document.querySelector('.js-moves').innerHTML ='';

        resultRemover();
        
        updateScoreElement();

        localStorage.setItem('score', JSON.stringify(score) );
    " class="reset-btn">Reset Scores</button>


</main>




    <script>
        
    
        
    

        let score = JSON.parse( localStorage.getItem('score')) || {
                wins: 0,
                losses :0,
                ties : 0
            };

            
            updateScoreElement();

            function updateScoreElement(){
            document.querySelector('.js-scores')
        .innerHTML = `ðŸ‘¤  ${score.wins} : ${score.losses} ðŸ¤– ` ;
        }

        /* ties: ${score.ties} */
    

    
        
        function playGame(playerMove){
            

            const computerMove = pickComputerMove();
            let result= '';

            if(playerMove === 'rock'){
                
                if(computerMove === 'rock'){
                    result = 'you tie';
                }else if (computerMove === 'paper'){
                    result = 'you lose';
                } else if ( computerMove === 'scissors'){
                    result = 'you win';
                }

            }else if(playerMove === 'paper'){
                
                if(computerMove === 'rock'){
                    result = 'you win';
                }else if (computerMove === 'paper'){
                    result = 'you tie';
                } else if ( computerMove === 'scissors'){
                    result = 'you lose';
                }

            }else if(playerMove === 'scissors'){
                
                if(computerMove === 'rock'){
                    result = 'you lose';
                }else if (computerMove === 'paper'){
                    result = 'you win';
                } else if ( computerMove === 'scissors'){
                    result = 'you tie';
                }
            }

            

            

            if(result === 'you win' ){
                score.wins +=1;
            }else if(result === 'you lose'){
                score.losses +=1;
            }else if(result === 'you tie'){
                score.ties +=1;
            } 

            
            updateScoreElement();
            let resultElement = document.querySelector('.js-result');
            resultElement.innerHTML = result;
            resultElement.classList.toggle("hidden", result.trim() === "");


            if (result.trim() !== "") {
                resultElement.style.display = "block";

                if (result === 'you win') {
                    resultElement.style.backgroundColor = "#54ff90";
                    resultElement.style.color = "#35114c";
                } else if(result === 'you lose'){
                    resultElement.style.backgroundColor = "#ff3a5a";
                    resultElement.style.color = "white";
                }else if(result === 'you tie'){
                    resultElement.style.backgroundColor = "white";
                    resultElement.style.color = "#35114c";
                }
                
                else {
                    // Set the default background color for other results
                    resultElement.style.backgroundColor = "transparent";
                 }

  }
            /* document.querySelector('.js-result')
                .innerHTML = result; */

            document.querySelector('.js-moves').innerHTML = `you 
        <img src="images/${playerMove}-emoji.png" > :
        <img src="images/${computerMove}-emoji.png">
        Robot`;
                /* .innerHTML = `You ${playerMove}, ${computerMove} Computer`; */


            /* alert(`you picked ${playerMove}, computer picked ${computerMove}, so  ${result}
wins: ${score.wins} , losses:${score.losses}, ties: ${score.ties}` ) */ 

           localStorage.setItem('score', JSON.stringify(score) );
            
        
        }


        


        function pickComputerMove(){
            let randomNumber = Math.random();   
            let computerMove = '';


            if (randomNumber<=1/3 && randomNumber>=0){
                computerMove = 'paper' ;
        
            }else if(randomNumber<=2/3 && randomNumber>1/3){
                computerMove = 'rock' ;
                
            }else if(randomNumber<=1 && randomNumber>2/3){
                computerMove = 'scissors' ;
                
            }

            return computerMove ;
        }

        
        let button = document.querySelector(".reset-btn");

        //click event listener
        button.addEventListener("click", (e) => {
        //preventing default behaviour
        e.preventDefault();

        //adding animate class to button
        button.classList.add("animate");

        setTimeout(() => {
            //removing animate class after 600ms
            button.classList.remove("animate");
        }, 600);
        });


        // Get the audio element
        let clickSound = document.querySelector('.rck-btn');

        // Function to play the sound
        function playClickSound() {
        clickSound.play();
        }



        function resultRemover(){

            let resultElement = document.querySelector('.js-result');
            resultElement.innerHTML = ''; // Clear any content inside the element
            resultElement.style.display = 'none'; // Hide the element
        }

    </script>
</body>
</html>
